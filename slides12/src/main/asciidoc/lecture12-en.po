#. extracted from lecture.adoc
msgid ""
msgstr ""
"Project-Id-Version: slides 12\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2023-02-24 21:31+0300\n"
"PO-Revision-Date: 2023-02-24 21:11+0200\n"
"Last-Translator: Automatically generated\n"
"Language-Team: none\n"
"Language: en_UK\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n != 1);\n"
"X-Generator: Poedit 3.2.2\n"

#: lecture.adoc:25
msgid ""
"= Core Java. Лекция 12: Annotations (окончание). Reflection API. Архитектура "
"приложения. Singleton (anti)pattern\n"
"Иван Пономарёв, КУРС/МФТИ\n"
":revealjs_theme: black\n"
":revealjs_customtheme: white_course.css\n"
":revealjs_slideNumber:\n"
":revealjs_history:\n"
":revealjs_progress:\n"
":encoding: UTF-8\n"
":lang: ru\n"
"include::_doc_general_attributes.adoc[]\n"
":doctype: article\n"
":toclevels: 3\n"
":imagesdir: images\n"
":source-highlighter: highlightjs\n"
":highlightjsdir: highlight\n"
":icons: font\n"
":iconfont-remote!:\n"
":iconfont-name: font-awesome-4.7.0/css/font-awesome\n"
":revealjs_mouseWheel: true\n"
":revealjs_center: false\n"
":revealjs_transition: none\n"
":revealjs_width: 1600\n"
":revealjs_height: 900\n"
":stem: latexmath"
msgstr ""
"= Core Java. Lecture #12: Annotations (ending). Reflection API. Application "
"architecture. Singleton (anti)pattern\n"
"Ivan Ponomarev, Synthesized.io/MIPT\n"
":revealjs_theme: black\n"
":revealjs_customtheme: white_course.css\n"
":revealjs_slideNumber:\n"
":revealjs_history:\n"
":revealjs_progress:\n"
":encoding: UTF-8\n"
":lang: ru\n"
"include::_doc_general_attributes.adoc[]\n"
":doctype: article\n"
":toclevels: 3\n"
":imagesdir: images\n"
":source-highlighter: highlightjs\n"
":highlightjsdir: highlight\n"
":icons: font\n"
":iconfont-remote!:\n"
":iconfont-name: font-awesome-4.7.0/css/font-awesome\n"
":revealjs_mouseWheel: true\n"
":revealjs_center: false\n"
":revealjs_transition: none\n"
":revealjs_width: 1600\n"
":revealjs_height: 900\n"
":stem: latexmath"

#: lecture.adoc:28
msgid ":!figure-caption:"
msgstr ":!figure-caption:"

#: lecture.adoc:30
msgid "ponomarev@corchestra.ru"
msgstr "ponomarev@corchestra.ru"

#: lecture.adoc:32
msgid "icon:twitter[size=lg] @inponomarev"
msgstr "icon:twitter[size=lg] @inponomarev"

#: lecture.adoc:34
msgid "== Массивы и другие аннотации"
msgstr "== Arrays and other annotations"

#: lecture.adoc:39
msgid ""
"[source,java]\n"
"----\n"
"//Массивы задаются в фигурных скобках\n"
"@BugReport(..., reportedBy = {\"Harry\", \"Carl\"})"
msgstr ""
"[source,java]\n"
"----\n"
"//Arrays are specified in curly braces\n"
"@BugReport(..., reportedBy = {\"Harry\", \"Carl\"})"

#: lecture.adoc:42
msgid ""
"//То же самое, что {\"Harry\"}\n"
"@BugReport(..., reportedBy = \"Harry\")"
msgstr ""
"//Same as {\"Harry\"}\n"
"@BugReport(..., reportedBy = \"Harry\")"

#: lecture.adoc:45
msgid ""
"//Конструирование вложенных аннотаций\n"
"@BugReport(..., ref = @Reference(id = \"12345\"))"
msgstr ""
"//Constructing nested annotations\n"
"@BugReport(..., ref = @Reference(id = \"12345\"))"

#: lecture.adoc:49
msgid ""
"//...Как видим, используя разрешённые типы,\n"
"//можно задать сколь угодно сложную структуру данных\n"
"----"
msgstr ""
"//... As you can see, using the allowed types,\n"
"//you can specify an arbitrarily complex data structure\n"
"----"

#: lecture.adoc:51
msgid ""
"WARNING: Значение аннотации не может быть установлено в `null`. Не "
"допускатся `null` даже в `default`-значениях. "
msgstr ""
"WARNING: The annotation value cannot be set to `null`. `null` will not be "
"allowed even for `default` values. "

#: lecture.adoc:53
msgid "== Где можно использовать аннотации"
msgstr "== Where to use annotations"

#: lecture.adoc:56
msgid ""
"* В декларациях\n"
"* При использовании типов"
msgstr ""
"* Declarations\n"
"* Type usage"

#: lecture.adoc:58
msgid "== Использование аннотаций в декларациях"
msgstr "== Use of annotations for declarations"

#: lecture.adoc:68
msgid ""
"* Packages\n"
"* Classes (включая `enum`)\n"
"* Interfaces (включая annotation interfaces)\n"
"* Methods\n"
"* Constructors\n"
"* Instance fields (включая константы `enum`)\n"
"* Local variables' declarations\n"
"* Parameter variables' declarations\n"
"* Type parameters"
msgstr ""
"* Packages\n"
"* Classes (including `enum`)\n"
"* Interfaces (including annotation interfaces)\n"
"* Methods\n"
"* Constructors\n"
"* Instance fields (including `enum` constants)\n"
"* Local variables' declarations\n"
"* Parameter variables' declarations\n"
"* Type parameters"

#: lecture.adoc:70
msgid "== Примеры использования аннотаций в декларациях"
msgstr "== Examples of the use of annotations in declarations"

#: lecture.adoc:75
msgid ""
"[source,java]\n"
"----\n"
"@Entity\n"
"public class User {"
msgstr ""
"[source,java]\n"
"----\n"
"@Entity\n"
"public class User {"

#: lecture.adoc:78
msgid ""
"  @Caption(\"user\")\n"
"  public User getUser(@Param(\"id\") String userId) {"
msgstr ""
"  @Caption(\"user\")\n"
"  public User getUser(@Param(\"id\") String userId) {"

#: lecture.adoc:83
msgid ""
"    @SuppressWarnings(\"unchecked\")\n"
"    List<User> users = ....\n"
"  }\n"
"}"
msgstr ""
"    @SuppressWarnings(\"unchecked\")\n"
"    List<User> users = ....\n"
"  }\n"
"}"

#: lecture.adoc:89
msgid ""
"class Cache<@Immutable V> {\n"
" ...\n"
"}\n"
"----"
msgstr ""
"class Cache<@Immutable V> {\n"
" ...\n"
"}\n"
"----"

#: lecture.adoc:92
msgid "== Аннотирование пакетов -- в package-info.java"
msgstr "== Annotate packages -- in package-info.java"

#: lecture.adoc:100
msgid ""
"[source,java]\n"
"----\n"
"//package-info.java\n"
"@GPL(version=\"3\")\n"
"package edu.phystech.corejava;\n"
"import org.gnu.GPL;\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"//package-info.java\n"
"@GPL(version=\"3\")\n"
"package edu.phystech.corejava;\n"
"import org.gnu.GPL;\n"
"----"

#: lecture.adoc:102
msgid "== Аннотирование использования типов"
msgstr "== Annotate the type usage"

#: lecture.adoc:107
msgid ""
"[source,java]\n"
"----\n"
"//аннотированный параметр, утверждает, что userId -- не `null`\n"
"User getUser(@NonNull String userId) { ... }"
msgstr ""
"[source,java]\n"
"----\n"
"//annotated parameter that states that userId is not `null`\n"
"User getUser(@NonNull String userId) { ... }"

#: lecture.adoc:112
msgid ""
"//Аннотированные использования типа: каждая строчка не `null`\n"
"List<@NonNull String> list = ...\n"
"Comparator.<@NonNull String>reverseOrder()\n"
"class Warning extends @Localized Message { ... }"
msgstr ""
"//Annotated type usage: each line is not `null`\n"
"List<@NonNull String> list = ...\n"
"Comparator. <@NonNull String>reverseOrder()\n"
"class Warning extends @Localized Message { ... }"

#: lecture.adoc:114
msgid "List<@Localized ? extends Message> = ..."
msgstr "List<@Localized ? extends Message> = ..."

#: lecture.adoc:116
msgid "(@Localized String) text"
msgstr "(@Localized String) text"

#: lecture.adoc:118
msgid "if (text instanceof @Localized String) ..."
msgstr "if (text instanceof @Localized String) ..."

#: lecture.adoc:122
msgid ""
"//и т. д., список примеров не полный. \n"
"// Аннотации могут быть почти везде!\n"
"----"
msgstr ""
"//etc., the list of examples is not complete. \n"
"//Annotations can be almost everywhere!\n"
"----"

#: lecture.adoc:125
msgid "== Java8+: аннотирование использования типа в `this`"
msgstr "== Java8+: annotate type usage in `this`"

#: lecture.adoc:133
msgid ""
"[source,java]\n"
"----\n"
"public class Foo {\n"
"  //аннотируется использование типа!\n"
"  void baz(@ReadOnly Foo this){\n"
"    ...\n"
"  }"
msgstr ""
"[source,java]\n"
"----\n"
"public class Foo {\n"
"  //type usage is being annotated!\n"
"  void baz(@ReadOnly Foo this){\n"
"    ...\n"
"  }"

#: lecture.adoc:142
msgid ""
"  class Bar {\n"
"    //аннотируется использование типа!\n"
"    public Bar(@ReadOnly Foo Foo.this) {\n"
"      ...\n"
"    }\n"
"  }\n"
"}\n"
"----"
msgstr ""
"  class Bar {\n"
"    //type usage is being annotated!\n"
"    public Bar(@ReadOnly Foo Foo.this) {\n"
"      ...\n"
"    }\n"
"  }\n"
"}\n"
"----"

#: lecture.adoc:144
msgid "== Знакомые стандартные (встроенные в язык) аннотации "
msgstr "== Familiar standard annotations built into the Java language "

#: lecture.adoc:161
msgid ""
"[cols=\"20a,18a,62a\"]\n"
"|===\n"
"|*Annotation +\n"
"interface*\n"
"|*Применимость* \n"
"|*Назначение*\n"
"|`@Override`\n"
"|Методы\n"
"|Метод переопределяет метод в базовом классе. Ошибка компиляции, если это не "
"так (см. лекцию про классы).\n"
"|`@FunctionalInterface`\n"
"|Интерфейсы\n"
"|Помечает интерфейс как функциональный (имеющий единственный абстрактный "
"метод). Ошибка компиляции, если это не так (см. лекцию про lambdas & method "
"refs).\n"
"|`@SafeVarargs`\n"
"|Методы и конструкторы\n"
"|Декларирует безопасное использование параметризованного varargs (см. лекцию "
"про Generics)\n"
"|==="
msgstr ""
"[cols=\"20a,18a,62a\"]\n"
"|===\n"
"|*Annotation +\n"
"interface*\n"
"|*Applicable to* \n"
"|*Meaning*\n"
"|`@Override`\n"
"|Methods\n"
"|Method overrides another method in a base class. Won't compile if it's not "
"the case (see lecture on classes).\n"
"|`@FunctionalInterface`\n"
"|Interfaces\n"
"|Marks interface as functional, i. e. having the only abstract method. Won't "
"compile if it's not the case (see lecture on lambdas and method "
"references).\n"
"|`@SafeVarargs`\n"
"|Methods and constructors\n"
"|Declares safe usage of parameterized varargs (see lecture on generics)\n"
"|==="

#: lecture.adoc:163
msgid "== Стандартные (встроенные в язык) аннотации "
msgstr "== Standard annotations built into the Java language "

#: lecture.adoc:180
msgid ""
"[cols=\"20a,20a,60a\"]\n"
"|===\n"
"|*Annotation +\n"
"interface*\n"
"|*Применимость* \n"
"|*Назначение*\n"
"|`@Deprecated`\n"
"|Все элементы API\n"
"|Данный элемент API deprecated -- т. е. сохранён для обратной совместимости, "
"запрещён к использованию в новых проектах, и возможно будет удалён в "
"будущем. \n"
"|`@SuppressWarnings`\n"
"|Все, кроме пакетов и аннотаций\n"
"|Подавляет предупреждения заданного типа от компилятора и линтеров.\n"
"|`@Generated`\n"
"|Все элементы API\n"
"|Помечает код, как автоматически сгенерированный (как следствие, этот код не "
"следует модифицировать руками).\n"
"|==="
msgstr ""
"[cols=\"20a,20a,60a\"]\n"
"|===\n"
"|*Annotation +\n"
"interface*\n"
"|*Applicable to* \n"
"|*Meaning*\n"
"|`@Deprecated`\n"
"|All API elements\n"
"|This API element is deprecated -- i. e. kept for backwards compatibility "
"only, it is prohibited to use it in new code and it's possible that this "
"element will be removed in the future. \n"
"|`@SuppressWarnings`\n"
"|Everything except packages and annotations\n"
"|Suppresses warnings of the given type that come from compiler and linters.\n"
"|`@Generated`\n"
"|All API elements\n"
"|Marks the code as automatically generated (and thus it doesn't make sense "
"to manually modify this code).\n"
"|==="

#: lecture.adoc:182
msgid "== Аннотации управляются аннотациями"
msgstr "== Annotations are managed by annotations"

#: lecture.adoc:187
msgid ""
"[source,java]\n"
"----\n"
"//Какие элементы кода могут быть аннотированы\n"
"@Target({ElementType.TYPE, ElementType.METHOD})"
msgstr ""
"[source,java]\n"
"----\n"
"//What code elements can be annotated\n"
"@Target({ElementType.TYPE, ElementType.METHOD})"

#: lecture.adoc:194
msgid ""
"//На каком уровне сохраняются эти аннотации\n"
"@Retention(RetentionPolicy.Source)\n"
"public @interface BugReport {\n"
" ...\n"
"}\n"
"----"
msgstr ""
"//At what level are these annotations retained?\n"
"@Retention(RetentionPolicy.Source)\n"
"public @interface BugReport {\n"
" ...\n"
"}\n"
"----"

#: lecture.adoc:196
msgid "== Target"
msgstr "== Target"

#: lecture.adoc:211
msgid ""
"[cols=\"25a,75a\"]\n"
"|===\n"
"| *ElementType*     | *Применимость аннотаций*\n"
"| `ANNOTATION_TYPE` | Интерфейсы аннотаций\n"
"| `PACKAGE`         | Пакеты\n"
"| `TYPE`            | Классы (в т. ч. `enums`) и интерфейсы (в т. ч. "
"`@interface`)\n"
"| `METHOD`          | Методы\n"
"| `CONSTRUCTOR`     | Конструкторы\n"
"| `FIELD`           | Поля\n"
"| `PARAMETER`       | Параметры методов или конструкторов\n"
"| `LOCAL_VARIABLE`  | Определения локальных переменных\n"
"| `TYPE_PARAMETER`  | Типовые параметры\n"
"| `TYPE_USE`        | Использования типов\n"
"|==="
msgstr ""
"[cols=\"25a,75a\"]\n"
"|===\n"
"| *ElementType*     | *Applicability of annotations*\n"
"| `ANNOTATION_TYPE` | Annotation interfaces\n"
"| `PACKAGE`         | Packages\n"
"| `TYPE`            | Classes (including `enums`) and interfaces (including "
"`@interface`)\n"
"| `METHOD`          | Methods\n"
"| `CONSTRUCTOR`     | Constructors\n"
"| `FIELD`           | Fields\n"
"| `PARAMETER`       | Method or constructor parameters\n"
"| `LOCAL_VARIABLE`  | Local variable definitions\n"
"| `TYPE_PARAMETER`  | Type parameters\n"
"| `TYPE_USE`        | Type usage\n"
"|==="

#: lecture.adoc:214
msgid "== RetentionPolicy"
msgstr "== RetentionPolicy"

#: lecture.adoc:226
msgid ""
"[graphviz,\"retention.png\"]\n"
"----\n"
"digraph G {\n"
"graph [ dpi = 180 ];\n"
"rankdir=\"LR\";\n"
"node[shape=box];\n"
"SOURCE -> CLASS;\n"
"CLASS -> RUNTIME;\n"
"CLASS[label=\"CLASS\\n(по умолчанию)\"]\n"
"}\n"
"----"
msgstr ""
"[graphviz,\"retention.png\"]\n"
"----\n"
"digraph G {\n"
"graph [ dpi = 180 ];\n"
"rankdir=\"LR\";\n"
"node[shape=box];\n"
"SOURCE -> CLASS;\n"
"CLASS -> RUNTIME;\n"
"CLASS[label=\"CLASS\\n(by default)\"]\n"
"}\n"
"----"

#: lecture.adoc:241
msgid ""
"[cols=\"25a,50a,25a\"]\n"
"|===\n"
"| *Retention Policy* | *Доступность аннотаций* | *API*\n"
"| `SOURCE` \n"
"| На уровне исходников для annotation processors. Не попадают в class-файлы "
"и runtime.\n"
"| Language Model API\n"
"| `CLASS` + \n"
"(по умолчанию)\n"
"| На уровне исходников и class-файлов. Невидимы в runtime.\n"
"| Instrumentation API\n"
"| `RUNTIME`\n"
"| На уровне исходников, в class-файлах и во время исполнения.\n"
"| Reflection API\n"
"|==="
msgstr ""
"[cols=\"25a,50a,25a\"]\n"
"|===\n"
"| *Retention Policy* | *Annotation availability* | *API*\n"
"| `SOURCE` \n"
"| In .java files for annotation processors. Do not get into .class files and "
"runtime.\n"
"| Language Model API\n"
"| `CLASS` + \n"
"(by default)\n"
"| In .java files and .class files. Invisible at run time.\n"
"| Instrumentation API\n"
"| `RUNTIME`\n"
"| In .java files, .class files and at run time.\n"
"| Reflection API\n"
"|==="

#: lecture.adoc:249
msgid ""
"== Другие мета-аннотации\n"
"[cols=\"25a,75a\"]\n"
"|===\n"
"|`@Documented` | Все аннотации данного типа будут попадать в JavaDoc-"
"документацию.\n"
"|`@Inherited`  | Если класс помечен аннотацией данного типа, то все "
"наследники данного класса также будут помечены аннотацией этого же типа. \n"
"|`@Repeatable` | Позволяет задать возможность многократной пометки элемента "
"аннотацией одного и того же типа. \n"
"|==="
msgstr ""
"== Other meta-annotations\n"
"[cols=\"25a,75a\"]\n"
"|===\n"
"|`@Documented` | All the annotations of this type will be included in the "
"JavaDoc documentation.\n"
"|`@Inherited`  | If a class is marked with an annotation of this type, then "
"all descendants of that class will also be marked with an annotation of the "
"same type. \n"
"|`@Repeatable` | Allows you to specify whether an item can be marked "
"multiple times with an annotation of the given type. \n"
"|==="

#: lecture.adoc:251
msgid "== Рефлексия (Reflection API)"
msgstr "== Reflection API"

#: lecture.adoc:256
msgid ""
"[source,java]\n"
"----\n"
"Employee e = ... //присваиваем Employee\n"
"Employee m = ... //присваиваем Manager"
msgstr ""
"[source,java]\n"
"----\n"
"Employee e = ... //assign Employee\n"
"Employee m = ... //assign Manager"

#: lecture.adoc:260
msgid ""
"//Получаем информацию в Runtime\n"
"Class<? extends Employee> ce = e.getClass();\n"
"Class<? extends Employee> cm = m.getClass();"
msgstr ""
"//Get type information in run time\n"
"Class<? extends Employee> ce = e.getClass();\n"
"Class<? extends Employee> cm = m.getClass();"

#: lecture.adoc:263
msgid ""
"System.out.printf(\"%s, %s%n\", ce.getName(), cm.getName());\n"
"//edu.phystech.hello.Employee, edu.phystech.hello.Manager"
msgstr ""
"System.out.printf(\"%s, %s%n\", ce.getName(), cm.getName());\n"
"//edu.phystech.hello.Employee, edu.phystech.hello.Manager"

#: lecture.adoc:267
msgid ""
"System.out.printf(\"%s, %s%n\", ce.getSimpleName(), cm.getSimpleName());\n"
"//Employee, Manager\n"
"----"
msgstr ""
"System.out.printf(\"%s, %s%n\", ce.getSimpleName(), cm.getSimpleName());\n"
"//Employee, Manager\n"
"----"

#: lecture.adoc:270
msgid ""
"== Класс `Class<T>` параметризован\n"
"Документация: _\"The actual result type of `getClass()` is `Class<? extends |"
"X|>`  where `|X|` is the erasure of the static type of the expression on "
"which `getClass` is called.\"_"
msgstr ""
"== `Class<T>` class is parameterized\n"
"Documentation: _\"The actual result type of `getClass()` is `Class<? extends "
"|X|>`  where `|X|` is the erasure of the static type of the expression on "
"which `getClass` is called.\"_"

#: lecture.adoc:274
msgid ""
"[source,java]\n"
"----\n"
"Employee e = ...; "
msgstr ""
"[source,java]\n"
"----\n"
"Employee e = ...; "

#: lecture.adoc:277
msgid ""
"//No cast needed!\n"
"Class<? extends Employee> c = e.getClass();"
msgstr ""
"//No cast needed!\n"
"Class<? extends Employee> c = e.getClass();"

#: lecture.adoc:281
msgid ""
"//No cast needed!\n"
"Employee newEmployee =\n"
"  ce.getDeclaredConstructor().newInstance();"
msgstr ""
"//No cast needed!\n"
"Employee newEmployee =\n"
"  ce.getDeclaredConstructor().newInstance();"

#: lecture.adoc:285
msgid ""
"//Compile-time error!\n"
"Class<? extends Number> cn = e.getClass();\n"
"----"
msgstr ""
"//Compile-time error!\n"
"Class<? extends Number> cn = e.getClass();\n"
"----"

#: lecture.adoc:287
msgid "== Class literals"
msgstr "== Class literals"

#: lecture.adoc:290
msgid ""
"* Литералы -- строки в коде, порождающие объекты или значения. Например, `"
"\"foo\"` -- литерал, порождающий объект `String` с содержимым \"foo\".\n"
"* Литералы классов -- специальные выражения в языке, порождающие объекты с "
"типом `Class<...>`."
msgstr ""
"* Literals are strings in code that generate objects or values. For example, "
"''foo'' is a literal that generates a `String` object with \"foo\" value.\n"
"* Class literals are special expressions in the language that generate "
"objects of type `Class<...>`."

#: lecture.adoc:292
msgid "== Class literals -- примеры"
msgstr "== Class literals -- examples"

#: lecture.adoc:298
msgid ""
"[source,java]\n"
"----\n"
"//тут всё понятно\n"
"Class<String> c1 = String.class;\n"
"Class<Integer> c2 = Integer.class;"
msgstr ""
"[source,java]\n"
"----\n"
"//everything is clear here\n"
"Class<String> c1 = String.class;\n"
"Class<Integer> c2 = Integer.class;"

#: lecture.adoc:302
msgid ""
"//Да, так можно!! \n"
"Class<Integer> c3 = int.class;\n"
"//А ещё double.class, boolean.class и т. д."
msgstr ""
"//Yes, you can!! \n"
"Class<Integer> c3 = int.class;\n"
"//And also double.class, boolean.class, etc."

#: lecture.adoc:305
msgid ""
"//При этом c2 и с3 -- существенно РАЗНЫЕ объекты \n"
"//(например, c3.getConstructors() возвращает пустой массив)."
msgstr ""
"//Note that c2 and c3 are significantly DIFFERENT objects. \n"
"//(for example, c3.getConstructors() returns an empty array.)"

#: lecture.adoc:309
msgid ""
"//Тут ничего неожиданного нет, массивами можно параметризовать:\n"
"Class<int[]> c4 = int[].class;\n"
"----"
msgstr ""
"//There is nothing unexpected here, you can parameterize by arrays:\n"
"Class<int[]> c4 = int[].class;\n"
"----"

#: lecture.adoc:311
msgid "== NB: странные имена классов-массивов"
msgstr "== NB: strange array class names"

#: lecture.adoc:326
msgid ""
"При чтении логов ошибок можно встретиться с таким:\n"
"[width=\"50%\"]\n"
"|===\n"
"|*Type*  |`.class.getName()`\n"
"|`byte[]`   |[B\n"
"|`short[]`  |[S\n"
"|`int[]`    |[I\n"
"|`long[]`   |[J\n"
"|`char[]`   |[C\n"
"|`double[]` |[D\n"
"|`float[]`  |[F\n"
"|`boolean[]`|[Z\n"
"|`Integer[]`|[Ljava.lang.Integer;\n"
"|==="
msgstr ""
"When reading error logs, you can meet the following:\n"
"[width=\"50%\"]\n"
"|===\n"
"|*Type*  |`.class.getName()`\n"
"|`byte[]`   | [B\n"
"|`short[]`  | [S\n"
"|`int[]`    | [I\n"
"|`long[]`   | [J\n"
"|`char[]`   | [C\n"
"|`double[]` | [D\n"
"|`float[]`  | [F\n"
"|`boolean[]`| [Z\n"
"|`Integer[]`| [Ljava.lang.Integer;\n"
"|==="

#: lecture.adoc:334
msgid ""
"== Динамический способ получения мета-класса\n"
"[source,java]\n"
"----\n"
"//может быть выброшен  ClassNotFoundException\n"
"//параметр типа тут никак не может быть известен\n"
"Class<?> clazz =\n"
"  Class.forName(\"edu.phystech.hello.Manager\");"
msgstr ""
"== Dynamic way to get a meta-class\n"
"[source,java]\n"
"----\n"
"//ClassNotFoundException can be thrown\n"
"//the type parameter cannot be known in advance here\n"
"Class<?> clazz =\n"
"  Class.forName(\"edu.phystech.hello.Manager\");"

#: lecture.adoc:336
msgid "//Есть две формы: "
msgstr "//There are two forms: "

#: lecture.adoc:340
msgid ""
"//загрузчик вызвавшего метода, статическая инициализация\n"
"static Class<?> forName(String className)\n"
"                         throws ClassNotFoundException"
msgstr ""
"//class loader of the calling method, static initialization\n"
"static Class<?> forName(String className)\n"
"                         throws ClassNotFoundException"

#: lecture.adoc:345
msgid ""
"//кастомный загрузчик, статическая инициализация по запросу\n"
"static Class<?> forName(String name, boolean initialize,\n"
"                                   ClassLoader loader)\n"
"----"
msgstr ""
"//custom class loader, static initialization on demand\n"
"static Class<?> forName(String name, boolean initialize,\n"
"                                   ClassLoader loader)\n"
"----"

#: lecture.adoc:347
msgid "== Загрузка ресурсных файлов"
msgstr "== Resource files loading"

#: lecture.adoc:353
msgid ""
"[source,java]\n"
"----\n"
"public InputStream getResourceAsStream(String name)\n"
"public java.net.URL getResource(String name)\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"public InputStream getResourceAsStream(String name)\n"
"public java.net.URL getResource(String name)\n"
"----"

#: lecture.adoc:355
msgid "image::resource.png[{image-100-width}]"
msgstr "image::resource.png[{image-100-width}]"

#: lecture.adoc:357
msgid "== Анализ возможностей класса и взаимодействие с элементами класса"
msgstr "== Analyzing class capabilities and interacting with class members"

#: lecture.adoc:361
msgid ""
"[plantuml, metaclass, png]\n"
"----\n"
"@startuml"
msgstr ""
"[plantuml, metaclass, png]\n"
"----\n"
"@startuml"

#: lecture.adoc:363
msgctxt "lecture.adoc:363"
msgid "skinparam dpi 150 "
msgstr "skinparam dpi 150 "

#: lecture.adoc:367
msgid ""
"class Class<T> {\n"
"  Class<? super T> getSuperclass()\n"
"   Class<?>[] getInterfaces()"
msgstr ""
"class Class<T> {\n"
"  Class<? super T> getSuperclass()\n"
"   Class<?>[] getInterfaces()"

#: lecture.adoc:377
msgid ""
"  Field[] getDeclaredFields()\n"
"  Field[] getFields()\n"
"  Constructor<?>[] getDeclaredConstructors()\n"
"  Constructor<?>[] getConstructors()\n"
"  Method[] getDeclaredMethods()\n"
"  Method[] getMethods()\n"
"  Class<?>[] getClasses()\n"
"  Class<?>[] getDeclaredClasses()\n"
"}"
msgstr ""
"  Field[] getDeclaredFields()\n"
"  Field[] getFields()\n"
"  Constructor<?>[] getDeclaredConstructors()\n"
"  Constructor<?>[] getConstructors()\n"
"  Method[] getDeclaredMethods()\n"
"  Method[] getMethods()\n"
"  Class<?>[] getClasses()\n"
"  Class<?>[] getDeclaredClasses()\n"
"}"

#: lecture.adoc:383
msgid ""
"abstract class Executable {\n"
"Class<?>[] getParameterTypes()\n"
"Class<?>[] getExceptionTypes()\n"
"}"
msgstr ""
"abstract class Executable {\n"
"Class<?>[] getParameterTypes()\n"
"Class<?>[] getExceptionTypes()\n"
"}"

#: lecture.adoc:388
msgid ""
"interface Member {\n"
"  String getName();\n"
"  int getModifiers();\n"
"}"
msgstr ""
"interface Member {\n"
"  String getName();\n"
"  int getModifiers();\n"
"}"

#: lecture.adoc:390
msgid "Member <|. Executable "
msgstr "Member <|. Executable "

#: lecture.adoc:394
msgid ""
"class Constructor {\n"
"T newInstance(Object ... initargs)\n"
"}"
msgstr ""
"class Constructor {\n"
"T newInstance(Object ... initargs)\n"
"}"

#: lecture.adoc:397
msgid ""
"class Method {\n"
"Class<?> getReturnType()"
msgstr ""
"class Method {\n"
"Class<?> getReturnType()"

#: lecture.adoc:400
msgid ""
"Object invoke(Object obj, Object... args)\n"
"}"
msgstr ""
"Object invoke(Object obj, Object... args)\n"
"}"

#: lecture.adoc:403
msgid ""
"class Field {\n"
"  Class<?> getType()"
msgstr ""
"class Field {\n"
"  Class<?> getType()"

#: lecture.adoc:406
msgid ""
"  Object get(Object obj)\n"
"  void set(Object obj, Object value)"
msgstr ""
"  Object get(Object obj)\n"
"  void set(Object obj, Object value)"

#: lecture.adoc:408
msgctxt "lecture.adoc:408"
msgid "}"
msgstr "}"

#: lecture.adoc:412
msgid ""
"Executable <|-- Constructor\n"
"Executable <|-- Method\n"
"Member     <|. Field"
msgstr ""
"Executable <|-- Constructor\n"
"Executable <|-- Method\n"
"Member     <|. Field"

#: lecture.adoc:417
msgid ""
"Class .. Constructor\n"
"Class .. Method\n"
"Class .. Field\n"
"Class .. Class"
msgstr ""
"Class .. Constructor\n"
"Class .. Method\n"
"Class .. Field\n"
"Class .. Class"

#: lecture.adoc:420
msgctxt "lecture.adoc:420"
msgid ""
"@enduml\n"
"----"
msgstr ""
"@enduml\n"
"----"

#: lecture.adoc:422
msgid "== Получение членов класса"
msgstr "== Retrieving Class Members"

#: lecture.adoc:425
msgid ""
"* `getXXX` -- все публичные элементы (поля, конструкторы, методы)\n"
"* `getDeclaredXXX` -- все элементы, задекларированные в данном классе (без "
"унаследованных)"
msgstr ""
"* `getXXX` -- all public elements (fields, constructors, methods)\n"
"* `getDeclaredXXX` -- all elements declared in this class (no inherited ones)"

#: lecture.adoc:428
msgid "== Доступ к элементам"
msgstr "== Accessing Class Members"

#: lecture.adoc:432
msgid ""
"[plantuml, accessible, png]\n"
"----\n"
"@startuml"
msgstr ""
"[plantuml, accessible, png]\n"
"----\n"
"@startuml"

#: lecture.adoc:434
msgctxt "lecture.adoc:434"
msgid "skinparam dpi 150 "
msgstr "skinparam dpi 150 "

#: lecture.adoc:440
msgid ""
"class AccessibleObject {\n"
"boolean isAccessible()\n"
"void setAccessible(boolean flag)\n"
"}"
msgstr ""
"class AccessibleObject {\n"
"boolean isAccessible()\n"
"void setAccessible(boolean flag)\n"
"}"

#: lecture.adoc:443
msgid ""
"abstract class Executable {\n"
"}"
msgstr ""
"abstract class Executable {\n"
"}"

#: lecture.adoc:445
msgid "class Field {"
msgstr "class Field {"

#: lecture.adoc:447
msgctxt "lecture.adoc:447"
msgid "}"
msgstr "}"

#: lecture.adoc:452
msgid ""
"AccessibleObject <|-- Executable\n"
"Executable <|-- Constructor\n"
"Executable <|-- Method\n"
"AccessibleObject     <|-- Field"
msgstr ""
"AccessibleObject <|-- Executable\n"
"Executable <|-- Constructor\n"
"Executable <|-- Method\n"
"AccessibleObject     <|-- Field"

#: lecture.adoc:456
msgctxt "lecture.adoc:456"
msgid ""
"@enduml\n"
"----"
msgstr ""
"@enduml\n"
"----"

#: lecture.adoc:459
msgid ""
"* По умолчанию доступ определяется уровнями видимости (например, приватные "
"элементы недоступны)\n"
"* Можно открыть через `setAccessible(true)`"
msgstr ""
"* By default, access is determined by visibility levels (e.g. private "
"elements are not available)\n"
"* Access can be granted by `setAccessible(true)`"

#: lecture.adoc:462
msgid "== Анализ аннотаций в runtime"
msgstr "== Analysis of annotations in runtime"

#: lecture.adoc:466
msgid ""
"[plantuml, annotated, png]\n"
"----\n"
"@startuml"
msgstr ""
"[plantuml, annotated, png]\n"
"----\n"
"@startuml"

#: lecture.adoc:468
msgctxt "lecture.adoc:468"
msgid "skinparam dpi 150 "
msgstr "skinparam dpi 150 "

#: lecture.adoc:476
msgid ""
"interface AnnotatedElement {\n"
"boolean isAnnotationPresent(Class<? extends Annotation> annotationClass)\n"
"<T extends Annotation> T getAnnotation(Class<T> annotationClass)\n"
"Annotation[] getAnnotations()\n"
"Annotation[] getDeclaredAnnotations()\n"
"<T extends Annotation> T[] getAnnotationsByType(Class<T> annotationClass)\n"
"}"
msgstr ""
"interface AnnotatedElement {\n"
"boolean isAnnotationPresent(Class<? extends Annotation> annotationClass)\n"
"<T extends Annotation> T getAnnotation(Class<T> annotationClass)\n"
"Annotation[] getAnnotations()\n"
"Annotation[] getDeclaredAnnotations()\n"
"<T extends Annotation> T[] getAnnotationsByType(Class<T> annotationClass)\n"
"}"

#: lecture.adoc:480
msgid ""
"abstract class Executable {\n"
"  {abstract} Annotation[][] getParameterAnnotations()\n"
"}"
msgstr ""
"abstract class Executable {\n"
"  {abstract} Annotation[][] getParameterAnnotations()\n"
"}"

#: lecture.adoc:484
msgid ""
"AnnotatedElement <|.. AccessibleObject\n"
"AnnotatedElement <|..Class\n"
"AccessibleObject <|-- Executable"
msgstr ""
"AnnotatedElement <|.. AccessibleObject\n"
"AnnotatedElement <|..Class\n"
"AccessibleObject <|-- Executable"

#: lecture.adoc:487
msgctxt "lecture.adoc:487"
msgid ""
"@enduml\n"
"----"
msgstr ""
"@enduml\n"
"----"

#: lecture.adoc:489
msgid "== Рефлексия и Generics"
msgstr "== Reflection and Generics"

#: lecture.adoc:491
msgid ""
"* В runtime по объекту нельзя определить параметры типов (например, отличить "
"`List<Employee>` от `List<Integer>`)."
msgstr ""
"* In the runtime, you cannot define type parameters of an object (for "
"example, you cannot distinguish `List<Employee>` from `List<Integer>`)."

#: lecture.adoc:493
msgid ""
"* Анализируя параметризованнные классы (например, `List<T>`) или методы "
"(например, `<T extends Comparable<? super T>> T min (T[] a)`), с помощью "
"рефлексии можно узнать всю информацию про его параметры типов."
msgstr ""
"* You can use reflection to find out all the information about type "
"parameters of parameterized classes (e.g. `List<T>`) or methods (e.g. `<T "
"extends Comparable<? super T>> T min (T[] a)`)."

#: lecture.adoc:495
msgid "== ReflectionUtils"
msgstr "== Reflection Utilities"

#: lecture.adoc:499
msgid ""
"* Reflection API довольно старое, использует массивы (неудобно в эпоху "
"Streams & Collections).\n"
"* Частые задачи (например, получить все -- публичные и приватные, "
"собственные и унаследованные элементы) не имеют готовых методов.\n"
"* Можно пользоваться готовыми библиотеками, например, Reflections (https://"
"github.com/ronmamo/reflections)."
msgstr ""
"* Reflection API is quite old, uses arrays (inconvenient in the era of "
"streams and collections).\n"
"* Many frequent tasks (for example, to get everything - public and private, "
"own and inherited elements) do not have ready-made methods.\n"
"* You can use ready-made libraries, for example, Reflections (https://github."
"com/ronmamo/reflections)."

#: lecture.adoc:501
msgid "== Класс с аннотированными полями"
msgstr "== Class with annotated fields"

#: lecture.adoc:513
msgid ""
"[source,java]\n"
"----\n"
"public class Person {\n"
"    @Published\n"
"    private final String firstName;\n"
"    @Published\n"
"    private final String lastName;\n"
"    @Published\n"
"    private final LocalDate birthDate;\n"
"    ...\n"
"}"
msgstr ""
"[source,java]\n"
"----\n"
"public class Person {\n"
"    @Published\n"
"    private final String firstName;\n"
"    @Published\n"
"    private final String lastName;\n"
"    @Published\n"
"    private final LocalDate birthDate;\n"
"    ...\n"
"}"

#: lecture.adoc:515
msgid "----"
msgstr "----"

#: lecture.adoc:517
msgid "== JsonSerializer: определение полей, помеченных @Published"
msgstr ""
"== JsonSerializer: determine which fields are annotated with `@Published`"

#: lecture.adoc:522
msgid ""
"[source,java]\n"
"----\n"
"public class JsonSerializer<T> {\n"
"  private final Set<Field> publishedFields;"
msgstr ""
"[source,java]\n"
"----\n"
"public class JsonSerializer<T> {\n"
"  private final Set<Field> publishedFields;"

#: lecture.adoc:530
msgid ""
"  public JsonSerializer(Class<T> serializedClass) {\n"
"    publishedFields = ReflectionUtils\n"
"       .getAllFields(serializedClass,\n"
"                f -> f.isAnnotationPresent(Published.class));\n"
"  publishedFields.forEach(f -> f.setAccessible(true));\n"
"}\n"
"----"
msgstr ""
"  public JsonSerializer(Class<T> serializedClass) {\n"
"    publishedFields = ReflectionUtils\n"
"       .getAllFields(serializedClass,\n"
"                f -> f.isAnnotationPresent(Published.class));\n"
"  publishedFields.forEach(f -> f.setAccessible(true));\n"
"}\n"
"----"

#: lecture.adoc:532
msgid "== JsonSerializer: сериализация объекта"
msgstr "== JsonSerializer: serialize the object"

#: lecture.adoc:552
msgid ""
"[source,java]\n"
"----\n"
"public JSONObject serialize(T o) {\n"
"  JSONObject result = new JSONObject();\n"
"  for (Field f : publishedFields) {\n"
"    Object fieldValue = null;\n"
"    try { fieldValue = f.get(o); } \n"
"      catch (IllegalAccessException e) {\n"
"        throw new IllegalStateException(e); }\n"
"      if (fieldValue instanceof LocalDate) {\n"
"        result.put(f.getName(), \n"
"    ((LocalDate) fieldValue).format(DateTimeFormatter.ISO_LOCAL_DATE));\n"
"      } else {\n"
"        result.put(f.getName(), fieldValue);\n"
"      }\n"
"    }\n"
"  return result;\n"
"}\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"public JSONObject serialize(T o) {\n"
"  JSONObject result = new JSONObject();\n"
"  for (Field f : publishedFields) {\n"
"    Object fieldValue = null;\n"
"    try { fieldValue = f.get(o); } \n"
"      catch (IllegalAccessException e) {\n"
"        throw new IllegalStateException(e); }\n"
"      if (fieldValue instanceof LocalDate) {\n"
"        result.put(f.getName(), \n"
"    ((LocalDate) fieldValue).format(DateTimeFormatter.ISO_LOCAL_DATE));\n"
"      } else {\n"
"        result.put(f.getName(), fieldValue);\n"
"      }\n"
"    }\n"
"  return result;\n"
"}\n"
"----"

#: lecture.adoc:554
msgid "== Пример с Controller"
msgstr "== Example with Controller"

#: lecture.adoc:559
msgid ""
"[source,java]\n"
"----\n"
"public class Controller {\n"
"    private final Service service;"
msgstr ""
"[source,java]\n"
"----\n"
"public class Controller {\n"
"    private final Service service;"

#: lecture.adoc:574
msgid ""
"    @Command(\"foo\")\n"
"    void doSomething() {\n"
"        service.foo();\n"
"    }\n"
"    @Command(\"bar\")\n"
"    void bar() {\n"
"        service.bar();\n"
"    }\n"
"    @Command()\n"
"    void help() {\n"
"        service.help();\n"
"    }\n"
"}\n"
"----"
msgstr ""
"    @Command(\"foo\")\n"
"    void doSomething() {\n"
"        service.foo();\n"
"    }\n"
"    @Command(\"bar\")\n"
"    void bar() {\n"
"        service.bar();\n"
"    }\n"
"    @Command()\n"
"    void help() {\n"
"        service.help();\n"
"    }\n"
"}\n"
"----"

#: lecture.adoc:576
msgid "== CommandDispatcher"
msgstr "== CommandDispatcher"

#: lecture.adoc:585
msgid ""
"[source,java]\n"
"----\n"
"public class CommandDispatcher {\n"
"    private final Object controller;\n"
"    private final Map<String, Method> methodHashMap = \n"
"                                        new HashMap<>();\n"
"    private Method defaultMethod;\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"public class CommandDispatcher {\n"
"    private final Object controller;\n"
"    private final Map<String, Method> methodHashMap = \n"
"                                        new HashMap<>();\n"
"    private Method defaultMethod;\n"
"----"

#: lecture.adoc:587
msgid "== CommandDispatcher: инициализация"
msgstr "== CommandDispatcher: Initialization"

#: lecture.adoc:608
msgid ""
"[source,java]\n"
"----\n"
"public CommandDispatcher(Object controller) {\n"
"  Objects.requireNonNull(controller);\n"
"  this.controller = controller;\n"
"  for (Method method : ReflectionUtils\n"
"           .getAllMethods(controller.getClass())) {\n"
"    Command command = method.getAnnotation(Command.class);\n"
"    if (command != null) {\n"
"       //Извлекаем параметр из аннотации\n"
"        String commandId = command.value();\n"
"        if (commandId.isEmpty()) {\n"
"            defaultMethod = method;\n"
"        } else {\n"
"            methodHashMap.put(commandId, method);\n"
"        }\n"
"    }\n"
"  }\n"
"}\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"public CommandDispatcher(Object controller) {\n"
"  Objects.requireNonNull(controller);\n"
"  this.controller = controller;\n"
"  for (Method method : ReflectionUtils\n"
"           .getAllMethods(controller.getClass())) {\n"
"    Command command = method.getAnnotation(Command.class);\n"
"    if (command != null) {\n"
"       //Extract the parameter from the annotation\n"
"        String commandId = command.value();\n"
"        if (commandId.isEmpty()) {\n"
"            defaultMethod = method;\n"
"        } else {\n"
"            methodHashMap.put(commandId, method);\n"
"        }\n"
"    }\n"
"  }\n"
"}\n"
"----"

#: lecture.adoc:610
msgid "== CommandDispatcher: выполнение команды"
msgstr "== CommandDispatcher: Executing the Command"

#: lecture.adoc:622
msgid ""
"[source,java]\n"
"----\n"
"public void executeCommand(String command) \n"
"  throws InvocationTargetException, IllegalAccessException {\n"
"    Method method = methodHashMap\n"
"      .getOrDefault(command, defaultMethod);\n"
"    if (method != null){\n"
"        method.invoke(controller);\n"
"    }\n"
"}\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"public void executeCommand(String command) \n"
"  throws InvocationTargetException, IllegalAccessException {\n"
"    Method method = methodHashMap\n"
"      .getOrDefault(command, defaultMethod);\n"
"    if (method != null){\n"
"        method.invoke(controller);\n"
"    }\n"
"}\n"
"----"

#: lecture.adoc:625
msgid "== Наш учебный пример про доклады и спикеров"
msgstr "== Our case study about reports and speakers"

#: lecture.adoc:636
msgid ""
"[plantuml, objects, png]\n"
"----\n"
"@startuml\n"
"skinparam dpi 180 \n"
"object ConnectionPool\n"
"object JdbcTemplate\n"
"object ConferenceDao\n"
"object SpeakerDao\n"
"object TalkDao\n"
"object Controller"
msgstr ""
"[plantuml, objects, png]\n"
"----\n"
"@startuml\n"
"skinparam dpi 180 \n"
"object ConnectionPool\n"
"object JdbcTemplate\n"
"object ConferenceDao\n"
"object SpeakerDao\n"
"object TalkDao\n"
"object Controller"

#: lecture.adoc:646
msgid ""
"JdbcTemplate -->ConnectionPool\n"
"SpeakerDao --> JdbcTemplate\n"
"TalkDao --> JdbcTemplate\n"
"ConferenceDao --> JdbcTemplate\n"
"Controller --> SpeakerDao\n"
"Controller --> TalkDao\n"
"Controller --> ConferenceDao\n"
"@enduml\n"
"----   "
msgstr ""
"JdbcTemplate -->ConnectionPool\n"
"SpeakerDao --> JdbcTemplate\n"
"TalkDao --> JdbcTemplate\n"
"ConferenceDao --> JdbcTemplate\n"
"Controller --> SpeakerDao\n"
"Controller --> TalkDao\n"
"Controller --> ConferenceDao\n"
"@enduml\n"
"----   "

#: lecture.adoc:649
msgid ""
"[%notitle]\n"
"== Wiring"
msgstr ""
"[%notitle]\n"
"== Wiring"

#: lecture.adoc:653
msgid ""
"//https://i.pinimg.com/originals/ce/9b/0d/ce9b0d180e893a8c2dedf239919b9721."
"jpg\n"
"image::wiring.jpg[]"
msgstr ""
"//https://i.pinimg.com/originals/ce/9b/0d/ce9b0d180e893a8c2dedf239919b9721."
"jpg\n"
"image::wiring.jpg[]"

#: lecture.adoc:656
msgid "== Реальная «слоистая» архитектура серверного приложения"
msgstr "== Real \"layered\" architecture of the server application"

#: lecture.adoc:663
msgid ""
"[plantuml, layers, png]\n"
"----\n"
"@startuml\n"
"skinparam dpi 180 \n"
"object Controller1\n"
"object Controller2"
msgstr ""
"[plantuml, layers, png]\n"
"----\n"
"@startuml\n"
"skinparam dpi 180 \n"
"object Controller1\n"
"object Controller2"

#: lecture.adoc:667
msgid ""
"object Service1\n"
"object Service2\n"
"object Service3"
msgstr ""
"object Service1\n"
"object Service2\n"
"object Service3"

#: lecture.adoc:671
msgid ""
"object Dao1\n"
"object Dao2\n"
"object Dao3"
msgstr ""
"object Dao1\n"
"object Dao2\n"
"object Dao3"

#: lecture.adoc:682
msgid ""
"Controller1 --> Service1\n"
"Controller1 --> Service2\n"
"Controller2 --> Service2\n"
"Controller2 --> Service1\n"
"Controller2 --> Service3\n"
"note on link\n"
"  «соединение\n"
"  проводами»,\n"
"  aka \"wiring\"\n"
"end note"
msgstr ""
"Controller1 --> Service1\n"
"Controller1 --> Service2\n"
"Controller2 --> Service2\n"
"Controller2 --> Service1\n"
"Controller2 --> Service3\n"
"note on link\n"
"  this is\n"
"  wiring!\n"
"end note"

#: lecture.adoc:688
msgid ""
"Service1 --> Dao1\n"
"Service2 --> Dao1\n"
"Service3 --> Dao2\n"
"Service3 --> Dao3\n"
"Service1 --> Dao2"
msgstr ""
"Service1 --> Dao1\n"
"Service2 --> Dao1\n"
"Service3 --> Dao2\n"
"Service3 --> Dao3\n"
"Service1 --> Dao2"

#: lecture.adoc:691
msgid ""
"@enduml\n"
"----    "
msgstr ""
"@enduml\n"
"----    "

#: lecture.adoc:694
msgid ""
"[%notitle]\n"
"== Coupling & Cohesion"
msgstr ""
"[%notitle]\n"
"== Coupling & Cohesion"

#: lecture.adoc:698
msgid ""
"//https://i.redd.it/yb17mu4cdn8z.jpg\n"
"image::wiring-coupling.jpg[{image-50-width}]"
msgstr ""
"//https://i.redd.it/yb17mu4cdn8z.jpg\n"
"image::wiring-coupling.jpg[{image-50-width}]"

#: lecture.adoc:701
msgid ""
"== Попытка №1, наивная. «Пусть объекты сами создают себе то, что им надо»"
msgstr ""
"== Attempt #1, naïve. \"Let the objects create for themselves what they need"
"\""

#: lecture.adoc:709
msgid ""
"[source,java]\n"
"----\n"
"public class DataSource {\n"
"  private ConnectionPool pool = new ConnectionPool(....); \n"
"    //взятые откуда-то параметры подключения к БД ^^^^^^  \n"
"  ...\n"
"}                             "
msgstr ""
"[source,java]\n"
"----\n"
"public class DataSource {\n"
"  private ConnectionPool pool = new ConnectionPool(....); \n"
"  // parameters taken from somewhere to connect to the database ^^^^^^  \n"
"  ...\n"
"}                             "

#: lecture.adoc:714
msgid ""
"public class SpeakerDao {\n"
"  private DataSource ds = new DataSource(); \n"
"  ...\n"
"}                             "
msgstr ""
"public class SpeakerDao {\n"
"  private DataSource ds = new DataSource(); \n"
"  ...\n"
"}                             "

#: lecture.adoc:722
msgid ""
"public class TalkDao {\n"
"  private DataSource ds = ??? \n"
"    //нам нужен один ConnectionPool на всех...\n"
"    //не получается :-(\n"
"  ...\n"
"}\n"
"----"
msgstr ""
"public class TalkDao {\n"
"  private DataSource ds = ??? \n"
"    //we need one ConnectionPool for all...\n"
"    //doesn't work :-(\n"
"  ...\n"
"}\n"
"----"

#: lecture.adoc:724
msgid "== Попытка №2. Выложим ссылку на единичный объект в статическое поле"
msgstr "== Attempt #2. Let's put a to a single object in a static field"

#: lecture.adoc:736
msgid ""
"[source,java]\n"
"----\n"
"public class ConnectionPool {\n"
"  private final static ConnectionPool instance = \n"
"                                  new ConnectionPool(...);\n"
"  public static ConnectionPool getInstance() {\n"
"    return instance;\n"
"  }\n"
"  //конструктор сделаем приватным, чтобы ни у кого не было соблазна\n"
"  //создать объект явно\n"
"  private ConnectionPool(...){"
msgstr ""
"[source,java]\n"
"----\n"
"public class ConnectionPool {\n"
"  private final static ConnectionPool instance = \n"
"                                  new ConnectionPool(...);\n"
"  public static ConnectionPool getInstance() {\n"
"    return instance;\n"
"  }\n"
"  //we will make the constructor private so that no one is tempted\n"
"  //to create the object explicitly\n"
"  private ConnectionPool(...) {"

#: lecture.adoc:740
msgid ""
"  }\n"
"}\n"
"----"
msgstr ""
"  }\n"
"}\n"
"----"

#: lecture.adoc:742
msgid "== Попытка №2. (продолжение)"
msgstr "== Attempt #2. (continued)"

#: lecture.adoc:750
msgid ""
"[source,java]\n"
"----\n"
"public class DataSource {\n"
"  private final static DataSource instance = ...\n"
"  public DataSource getInstance() {\n"
"    return instance;\n"
"  }"
msgstr ""
"[source,java]\n"
"----\n"
"public class DataSource {\n"
"  private final static DataSource instance = ...\n"
"  public DataSource getInstance() {\n"
"    return instance;\n"
"  }"

#: lecture.adoc:752
msgid "  private ConnectionPool pool = ConnectionPool.getInstance();"
msgstr "  private ConnectionPool pool = ConnectionPool.getInstance();"

#: lecture.adoc:758
msgid ""
"  private DataSource() {\n"
"    ...\n"
"  }\n"
"}                             \n"
"----"
msgstr ""
"  private DataSource() {\n"
"    ...\n"
"  }\n"
"}                             \n"
"----"

#: lecture.adoc:760
msgid "== Мы только что изобрели дизайн-паттерн «Одиночка»!"
msgstr "== We just invented the \"Singleton\" design pattern!"

#: lecture.adoc:765
msgid ""
"[cols=\"30a,70a\"]\n"
"|===\n"
"|image::gof.jpg[]\n"
"|"
msgstr ""
"[cols=\"30a,70a\"]\n"
"|===\n"
"|image::gof.jpg[]\n"
"|"

#: lecture.adoc:771
msgid ""
"* *Erich Gamma et al.*, Design Patterns: Elements of Reusable Object-"
"Oriented Software\n"
"* Книга 1994 года\n"
"* Классическая книга по дизайну ПО...\n"
"* ...но местами уже устаревшая.\n"
"|==="
msgstr ""
"* *Erich Gamma et al.*, Design Patterns: Elements of Reusable Object-"
"Oriented Software\n"
"* 1994 book\n"
"* Classic software design book...\n"
"* ... but partially outdated.\n"
"|==="

#: lecture.adoc:773
msgid "== Singleton Pattern"
msgstr "== Singleton Pattern"

#: lecture.adoc:778
msgid ""
"* Прямое создание невозможно (инксапсулировано в приватном конструкторе).\n"
"* Доступ к единственному экземпляру только через статический метод "
"`getInstance()` (или `final`-переменную `INSTANCE`).\n"
"* Ведёт к проблемам архитектурного плана.\n"
"* Но сначала отвлечёмся и попробуем правильно «сварить» синглетон."
msgstr ""
"* Direct creation is not possible (incapsulated in a private constructor).\n"
"* Access a single instance only through the static `getInstance()` method "
"(or the `final` variable `INSTANCE`).\n"
"* Leads to architectural problems.\n"
"* But first, let's digress and try to properly \"cook\" the singleton."

#: lecture.adoc:780
msgid "== Синглетоноварение: подход №1"
msgstr "== Singleton brewing: attempt #1"

#: lecture.adoc:786
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"  //Создание Singleton \"спрятано\"\n"
"  private static final Singleton instance = new Singleton();"
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"  //Singleton creation is \"hidden\"\n"
"  private static final Singleton instance = new Singleton();"

#: lecture.adoc:790
msgid ""
"  public static Singleton getInstance() {\n"
"    return instance;\n"
"  }"
msgstr ""
"  public static Singleton getInstance() {\n"
"    return instance;\n"
"  }"

#: lecture.adoc:796
msgid ""
"  //Лишаем возможности создать экземпляр объекта \"извне\"\n"
"  private Singleton(){\n"
"  }\n"
"}\n"
"----"
msgstr ""
"  //We prohibit the option to create another instance \"from the outside\"\n"
"  private Singleton(){\n"
"  }\n"
"}\n"
"----"

#: lecture.adoc:799
msgid ""
"[.fragment]\n"
"\"Тяжёлый\" объект создаётся всегда, даже если `getInstance` не будет вызван?"
msgstr ""
"[.fragment]\n"
"A \"heavy\" object is created always, even if `getInstance` is not called?"

#: lecture.adoc:801
msgid "== Подход №2"
msgstr "== Attempt #2"

#: lecture.adoc:806
msgctxt "lecture.adoc:806"
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static Singleton instance;"
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static Singleton instance;"

#: lecture.adoc:819
msgid ""
"    public static Singleton getInstance() {\n"
"        if (instance == null) {\n"
"           instance = new Singleton();\n"
"        }\n"
"        return instance;\n"
"    }\n"
"    private Singleton(){\n"
"    }\n"
"}\n"
"----\n"
"[.fragment]\n"
"Что с многопоточным доступом к переменной `instance`?"
msgstr ""
"    public static Singleton getInstance() {\n"
"        if (instance == null) {\n"
"           instance = new Singleton();\n"
"        }\n"
"        return instance;\n"
"    }\n"
"    private Singleton(){\n"
"    }\n"
"}\n"
"----\n"
"[.fragment]\n"
"What if multiple threads are accessing the `instance` variable?"

#: lecture.adoc:821
msgid "== Подход №3 ?!"
msgstr "== Attempt #3 ?!"

#: lecture.adoc:826
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static volatile Singleton instance;"
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static volatile Singleton instance;"

#: lecture.adoc:839
msgid ""
"    public static Singleton getInstance() {\n"
"        if (instance == null) {\n"
"            instance = new Singleton();\n"
"        }\n"
"        return instance;\n"
"    }\n"
"    private Singleton(){\n"
"    }\n"
"}\n"
"----\n"
"[.fragment]\n"
"Теперь нет гарантии, что экземпляр создаётся только один раз!"
msgstr ""
"    public static Singleton getInstance() {\n"
"        if (instance == null) {\n"
"            instance = new Singleton();\n"
"        }\n"
"        return instance;\n"
"    }\n"
"    private Singleton(){\n"
"    }\n"
"}\n"
"----\n"
"[.fragment]\n"
"Now there is no guarantee that the instance is being created only once!"

#: lecture.adoc:842
msgid "== Подход №4 ?! ?!"
msgstr "== Attempt #4 ?! ?!"

#: lecture.adoc:847
msgctxt "lecture.adoc:847"
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static Singleton instance;"
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static Singleton instance;"

#: lecture.adoc:860
msgid ""
"    public static synchronized Singleton getInstance() {\n"
"        if (instance == null) {\n"
"            instance = new Singleton();\n"
"        }\n"
"        return instance;\n"
"    }\n"
"    private Singleton(){\n"
"    }\n"
"}\n"
"----\n"
"[.fragment] \n"
"Все потоки будут выстраиваться в очередь, только чтобы получить доступ к "
"переменной instance?  "
msgstr ""
"    public static synchronized Singleton getInstance() {\n"
"        if (instance == null) {\n"
"            instance = new Singleton();\n"
"        }\n"
"        return instance;\n"
"    }\n"
"    private Singleton(){\n"
"    }\n"
"}\n"
"----\n"
"[.fragment] \n"
"All the threads will queue up just to access the `instance` variable?  "

#: lecture.adoc:862
msgid "== Подход №5 ?! ?! ?!"
msgstr "== Attempt #5 ?! ?! ?!"

#: lecture.adoc:882
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static Singleton instance;\n"
"    private static final Object lock = new Object();\n"
"    public static Singleton getInstance() {\n"
"        if (instance == null)\n"
"            synchronized (lock) {\n"
"                if (instance == null)\n"
"                    instance = new Singleton();\n"
"            }\n"
"        return instance;\n"
"    }\n"
"    private Singleton() {\n"
"    }\n"
"}\n"
"----\n"
"[.fragment] \n"
"Программа сломана. Из-за того, что в первом `if`-е чтение поля `instance` не "
"синхронизировано, возможно чтение частично инициализированного объекта (если "
"конструктор `Singleton` заинлайнен)."
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static Singleton instance;\n"
"    private static final Object lock = new Object();\n"
"    public static Singleton getInstance() {\n"
"        if (instance == null)\n"
"            synchronized (lock) {\n"
"                if (instance == null)\n"
"                    instance = new Singleton();\n"
"            }\n"
"        return instance;\n"
"    }\n"
"    private Singleton() {\n"
"    }\n"
"}\n"
"----\n"
"[.fragment] \n"
"Now the program is broken. Due to the fact that reading of the `instance` "
"field is not synchronized in the first `if` block, it is possible to read a "
"partially initialized object (if the `Singleton` constructor is inlined)."

#: lecture.adoc:884
msgid "== Подход №6 . . ."
msgstr "== Attempt #6 . . ."

#: lecture.adoc:904
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static volatile Singleton instance;\n"
"    private static final Object lock = new Object();\n"
"    public static Singleton getInstance() {\n"
"        if (instance == null)\n"
"            synchronized (lock) {\n"
"                if (instance == null)\n"
"                    instance = new Singleton();\n"
"            }\n"
"        return instance;\n"
"    }\n"
"    private Singleton() {\n"
"    }\n"
"}\n"
"----\n"
"[.fragment]\n"
"Ну, почти. Только у нас оверхед, потому что два раза читаем `volatile`-"
"переменную."
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static volatile Singleton instance;\n"
"    private static final Object lock = new Object();\n"
"    public static Singleton getInstance() {\n"
"        if (instance == null)\n"
"            synchronized (lock) {\n"
"                if (instance == null)\n"
"                    instance = new Singleton();\n"
"            }\n"
"        return instance;\n"
"    }\n"
"    private Singleton() {\n"
"    }\n"
"}\n"
"----\n"
"[.fragment]\n"
"Well, almost. But we have a performance overhead, because we read the "
"`volatile` variable twice."

#: lecture.adoc:908
msgid ""
"== Подход №7. Код из книги \"Effective Java, 3rd edition\"\n"
"Joshua Bloch: \"On my machine, this method is about 1.4 times as fast as the "
"obvious version without a local variable\". [EJ, 3rd ed., pp. 334-335]"
msgstr ""
"== Attempt #7. Code from the book \"Effective Java, 3rd edition\"\n"
"Joshua Bloch: \"On my machine, this method is about 1.4 times as fast as the "
"obvious version without a local variable\". [EJ, 3rd ed., pp. 334-335]"

#: lecture.adoc:926
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"  private static volatile Singleton instance;\n"
"  private static final Object lock = new Object();\n"
"  public static Singleton getInstance() {\n"
"    Singleton result = instance;\n"
"    if (result == null) {\n"
"      synchronized (lock) {\n"
"        if (instance == null)\n"
"          instance = result = new Singleton();\n"
"        }\n"
"     }\n"
"     return result;\n"
"  }\n"
"}\n"
"----"
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"  private static volatile Singleton instance;\n"
"  private static final Object lock = new Object();\n"
"  public static Singleton getInstance() {\n"
"    Singleton result = instance;\n"
"    if (result == null) {\n"
"      synchronized (lock) {\n"
"        if (instance == null)\n"
"          instance = result = new Singleton();\n"
"        }\n"
"     }\n"
"     return result;\n"
"  }\n"
"}\n"
"----"

#: lecture.adoc:928
msgid "== Подход №7. Код из книги \"Effective Java, 3rd edition\""
msgstr "== Attempt #7. Code from the book \"Effective Java, 3rd edition\""

#: lecture.adoc:931
msgid ""
"Вы уже видите баг в этом коде? +\n"
"{nbsp}"
msgstr ""
"Do you already see the bug in the following code? +\n"
"{nbsp}"

#: lecture.adoc:951
msgid ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"  private static volatile Singleton instance;\n"
"  private static final Object lock = new Object();\n"
"  public static Singleton getInstance() {\n"
"    Singleton result = instance;\n"
"    if (result == null) {\n"
"      synchronized (lock) {\n"
"        if (instance == null)\n"
"          instance = result = new Singleton();\n"
"        }\n"
"     }\n"
"     return result;\n"
"  }\n"
"}\n"
"----\n"
"[.fragment]\n"
"Если при входе в `synchronized`-блок `instance != null`, на выходе -- `null`."
msgstr ""
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"  private static volatile Singleton instance;\n"
"  private static final Object lock = new Object();\n"
"  public static Singleton getInstance() {\n"
"    Singleton result = instance;\n"
"    if (result == null) {\n"
"      synchronized (lock) {\n"
"        if (instance == null)\n"
"          instance = result = new Singleton();\n"
"        }\n"
"     }\n"
"     return result;\n"
"  }\n"
"}\n"
"----\n"
"[.fragment]\n"
"If `instance != null` when we enter the `synchronized` block, we will return "
"`null`."

#: lecture.adoc:954
msgid ""
"[%notitle]\n"
"== Как так получилось"
msgstr ""
"[%notitle]\n"
"== How did this happen?"

#: lecture.adoc:956
msgid "image::bloch.png[{image-100-width}]"
msgstr "image::bloch.png[{image-100-width}]"

#: lecture.adoc:959
msgid ""
"[%notitle]\n"
"== WTF?"
msgstr ""
"[%notitle]\n"
"== WTF?"

#: lecture.adoc:961
msgid "image::scream.jpg[canvas, size=cover]"
msgstr "image::scream.jpg[canvas, size=cover]"

#: lecture.adoc:973
msgid ""
"== Единственно Верный Ленивый Потокобезопасный Синглетон \n"
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static volatile Singleton instance;\n"
"    private static final Object lock = new Object();\n"
"    public static Singleton getInstance() {\n"
"        Singleton result = instance;\n"
"        if (result != null)\n"
"            return result;"
msgstr ""
"== The Only Correct Lazy Thread-Safe Singleton Implementation\n"
"[source,java]\n"
"----\n"
"public class Singleton {\n"
"    private static volatile Singleton instance;\n"
"    private static final Object lock = new Object();\n"
"    public static Singleton getInstance() {\n"
"        Singleton result = instance;\n"
"        if (result != null)\n"
"            return result;"

#: lecture.adoc:983
msgid ""
"        synchronized (lock) {\n"
"            if (instance == null)\n"
"                instance = new Singleton();\n"
"            return instance;\n"
"        }\n"
"    }\n"
"    private Singleton() {}\n"
"}\n"
"----"
msgstr ""
"        synchronized (lock) {\n"
"            if (instance == null)\n"
"                instance = new Singleton();\n"
"            return instance;\n"
"        }\n"
"    }\n"
"    private Singleton() {}\n"
"}\n"
"----"

#: lecture.adoc:986
msgid ""
"[.fragment]\n"
"Или нет?"
msgstr ""
"[.fragment]\n"
"OR NOT?"

#: lecture.adoc:988
msgid "== Подход №8"
msgstr "== Attempt #8"

#: lecture.adoc:996
msgid ""
"[source,java]\n"
"----\n"
"// Correct lazy initialization in Java\n"
"public class Singleton {\n"
"    private static class SingletonHolder {\n"
"       public static final Singleton instance = new Singleton();\n"
"    }"
msgstr ""
"[source,java]\n"
"----\n"
"// Correct lazy initialization in Java\n"
"public class Singleton {\n"
"    private static class SingletonHolder {\n"
"       public static final Singleton instance = new Singleton();\n"
"    }"

#: lecture.adoc:1004
msgid ""
"    public static Singleton getInstance() {\n"
"        return SingletonHolder.instance;\n"
"    }\n"
"    private Singleton() {\n"
"    }\n"
"}\n"
"----"
msgstr ""
"    public static Singleton getInstance() {\n"
"        return SingletonHolder.instance;\n"
"    }\n"
"    private Singleton() {\n"
"    }\n"
"}\n"
"----"

#~ msgid ""
#~ "//== Часть 1. Введение\n"
#~ ":!figure-caption:"
#~ msgstr ""
#~ "//== Часть 1. Введение\n"
#~ ":!figure-caption:"

#~ msgctxt "lecture.adoc:435"
#~ msgid "skinparam dpi 150 "
#~ msgstr "skinparam dpi 150 "

#~ msgctxt "lecture.adoc:448"
#~ msgid "}"
#~ msgstr "}"

#~ msgctxt "lecture.adoc:457"
#~ msgid ""
#~ "@enduml\n"
#~ "----"
#~ msgstr ""
#~ "@enduml\n"
#~ "----"

#~ msgctxt "lecture.adoc:469"
#~ msgid "skinparam dpi 150 "
#~ msgstr "skinparam dpi 150 "

#~ msgctxt "lecture.adoc:488"
#~ msgid ""
#~ "@enduml\n"
#~ "----"
#~ msgstr ""
#~ "@enduml\n"
#~ "----"

#~ msgctxt "lecture.adoc:848"
#~ msgid ""
#~ "[source,java]\n"
#~ "----\n"
#~ "public class Singleton {\n"
#~ "    private static Singleton instance;"
#~ msgstr ""
#~ "[source,java]\n"
#~ "----\n"
#~ "public class Singleton {\n"
#~ "    private static Singleton instance;"

#~ msgctxt "./slides12/src/main/asciidoc/lecture.adoc:435"
#~ msgid "skinparam dpi 150 "
#~ msgstr "skinparam dpi 150 "

#~ msgctxt "./slides12/src/main/asciidoc/lecture.adoc:448"
#~ msgid "}"
#~ msgstr "}"

#~ msgctxt "./slides12/src/main/asciidoc/lecture.adoc:457"
#~ msgid ""
#~ "@enduml\n"
#~ "----"
#~ msgstr ""
#~ "@enduml\n"
#~ "----"

#~ msgctxt "./slides12/src/main/asciidoc/lecture.adoc:469"
#~ msgid "skinparam dpi 150 "
#~ msgstr "skinparam dpi 150 "

#~ msgctxt "./slides12/src/main/asciidoc/lecture.adoc:488"
#~ msgid ""
#~ "@enduml\n"
#~ "----"
#~ msgstr ""
#~ "@enduml\n"
#~ "----"

#~ msgctxt "./slides12/src/main/asciidoc/lecture.adoc:848"
#~ msgid ""
#~ "[source,java]\n"
#~ "----\n"
#~ "public class Singleton {\n"
#~ "    private static Singleton instance;"
#~ msgstr ""
#~ "[source,java]\n"
#~ "----\n"
#~ "public class Singleton {\n"
#~ "    private static Singleton instance;"
